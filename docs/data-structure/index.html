<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Data Structure - Hugo Whisper Theme</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="www.example.com/favicon.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.1.1/gh-fork-ribbon.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
  
  
  
  <link rel="stylesheet" href="/www.example.com/css/style.min.f31edf12f81d9ad5234f2b100646ce1f51e3ab0f6a37c940a43bcd79513204c3.css">
  

  

</head>

<body class='page page-default-single'>

  <div class="github-fork-ribbon-wrapper right">
      <div class="github-fork-ribbon">
          <a href="https://github.com/mbdavid/litedb">Fork me on GitHub</a>
      </div>
  </div>

  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="www.example.com/">
        <span>HOME</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="www.example.com/docs/">
        <span>DOCS</span>
      </a>
    </li>
    
    <li class="menu-item-api">
      <a href="www.example.com/api/">
        <span>API</span>
      </a>
    </li>
    
    <li class="menu-item-download">
      <a href="https://www.nuget.org/packages/LiteDB/">
        <span>DOWNLOAD</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="www.example.com"><img alt="Logo" src="/www.example.com/logo_litedb.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="www.example.com"><img alt="Logo" src="/www.example.com/logo_litedb.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="www.example.com/">
        <span>HOME</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="www.example.com/docs/">
        <span>DOCS</span>
      </a>
    </li>
    
    <li class="menu-item-api">
      <a href="www.example.com/api/">
        <span>API</span>
      </a>
    </li>
    
    <li class="menu-item-download">
      <a href="https://www.nuget.org/packages/LiteDB/">
        <span>DOWNLOAD</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <h4>Docs</h4>
  <ul>
    
    <li class="">
      <a href="www.example.com/docs/bsondocument/">BsonDocument</a>
    </li>
    
    <li class="">
      <a href="www.example.com/docs/changelog/">ChangeLog</a>
    </li>
    
    <li class="">
      <a href="www.example.com/docs/collections/">Collections</a>
    </li>
    
    <li class="">
      <a href="www.example.com/docs/concurrency/">Concurrency</a>
    </li>
    
    <li class="">
      <a href="www.example.com/docs/connection-string/">Connection String</a>
    </li>
    
    <li class="active ">
      <a href="www.example.com/docs/data-structure/">Data Structure</a>
    </li>
    
    <li class="">
      <a href="www.example.com/docs/dbref/">DbRef</a>
    </li>
    
    <li class="">
      <a href="www.example.com/docs/expressions/">Expressions</a>
    </li>
    
    <li class="">
      <a href="www.example.com/docs/filestorage/">FileStorage</a>
    </li>
    
    <li class="">
      <a href="www.example.com/docs/getting-started/">Getting Started</a>
    </li>
    
    <li class="">
      <a href="www.example.com/docs/how-litedb-works/">How LiteDB Works</a>
    </li>
    
    <li class="">
      <a href="www.example.com/docs/indexes/">Indexes</a>
    </li>
    
    <li class="">
      <a href="www.example.com/docs/object-mapping/">Object Mapping</a>
    </li>
    
    <li class="">
      <a href="www.example.com/docs/queries/">Queries</a>
    </li>
    
    <li class="">
      <a href="www.example.com/docs/repository-pattern/">Repository Pattern</a>
    </li>
    
  </ul>
</div>

          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">Data Structure</h1>
<div class="content">
  

<p>LiteDB stores data as documents, which are JSON-like field and value pairs. Documents are a schema-less data structure. Each document has your data and structure together.</p>
<div class="highlight"><pre class="chroma"><code class="language-JS" data-lang="JS"><span class="p">{</span>
    <span class="nx">_id</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">first</span><span class="o">:</span> <span class="s2">&#34;John&#34;</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="s2">&#34;Doe&#34;</span> <span class="p">},</span>
    <span class="nx">age</span><span class="o">:</span> <span class="mi">37</span><span class="p">,</span>
    <span class="nx">salary</span><span class="o">:</span> <span class="mf">3456.0</span><span class="p">,</span>
    <span class="nx">createdDate</span><span class="o">:</span> <span class="p">{</span> <span class="nx">$date</span><span class="o">:</span> <span class="s2">&#34;2014-10-30T00:00:00.00Z&#34;</span> <span class="p">},</span>
    <span class="nx">phones</span><span class="o">:</span> <span class="p">[</span><span class="s2">&#34;8000-0000&#34;</span><span class="p">,</span> <span class="s2">&#34;9000-0000&#34;</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li><code>_id</code> contains document primary key - a unique value in collection</li>
<li><code>name</code> contains an embedded document with <code>first</code> and <code>last</code> fields</li>
<li><code>age</code> contains a <code>Int32</code> value</li>
<li><code>salary</code> contains a <code>Double</code> value</li>
<li><code>createDate</code> contains a <code>DateTime</code> value</li>
<li><code>phones</code> contains an array of <code>String</code></li>
</ul>

<p>LiteDB stores documents in collections. A collection is a group of related documents that have a set of shared indices. Collections are analogous to a table in relational databases.</p>

<h3 id="bson">BSON</h3>

<p>LiteDB stores documents in the BSON (Binary JSON) data format. BSON is a binary representation of JSON with additional type information. In the documents, the value of a field can be any of the BSON data types, including other documents, arrays, and arrays of documents. BSON is a fast and simple way to serialize documents in binary format.</p>

<p>LiteDB uses only a subset of <a href="http://bsonspec.org/spec.html">BSON data types</a>. See all supported LiteDB BSON data types and .NET equivalents.</p>

<table>
<thead>
<tr>
<th>BSON Type</th>
<th>.NET type</th>
</tr>
</thead>

<tbody>
<tr>
<td>MinValue</td>
<td>-</td>
</tr>

<tr>
<td>Null</td>
<td>Any .NET object with <code>null</code> value</td>
</tr>

<tr>
<td>Int32</td>
<td><code>System.Int32</code></td>
</tr>

<tr>
<td>Int64</td>
<td><code>System.Int64</code></td>
</tr>

<tr>
<td>Double</td>
<td><code>System.Double</code></td>
</tr>

<tr>
<td>Decimal</td>
<td><code>System.Decimal</code></td>
</tr>

<tr>
<td>String</td>
<td><code>System.String</code></td>
</tr>

<tr>
<td>Document</td>
<td><code>System.Collection.Generic.Dictionary&lt;string, BsonValue&gt;</code></td>
</tr>

<tr>
<td>Array</td>
<td><code>System.Collection.Generic.List&lt;BsonValue&gt;</code></td>
</tr>

<tr>
<td>Binary</td>
<td><code>System.Byte[]</code></td>
</tr>

<tr>
<td>ObjectId</td>
<td><code>LiteDB.ObjectId</code></td>
</tr>

<tr>
<td>Guid</td>
<td><code>System.Guid</code></td>
</tr>

<tr>
<td>Boolean</td>
<td><code>System.Boolean</code></td>
</tr>

<tr>
<td>DateTime</td>
<td><code>System.DateTime</code></td>
</tr>

<tr>
<td>MaxValue</td>
<td>-</td>
</tr>
</tbody>
</table>

<h3 id="datetime-attention">DateTime Attention</h3>

<p>Because of BSON spec <code>DateTime</code> store with <strong>ms</strong> precision <strong>without</strong> <code>DateTimeKind</code>.<br>
All <code>DateTime</code> values converts to UTC before store and converts back to local on retrieve.</p>

<h3 id="json-extended">JSON Extended</h3>

<p>To serialize a document to JSON, LiteDB uses an extended version of JSON so as not to lose any BSON type information that does not exist in JSON. Extended data type is represented as an embedded document, using an initial <code>$</code> key and value as string.</p>

<table>
<thead>
<tr>
<th>BSON data type</th>
<th>JSON representation</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>ObjectId</td>
<td><code>{ &quot;$oid&quot;: &quot;507f1f55bcf96cd799438110&quot; }</code></td>
<td>12 bytes in hex format</td>
</tr>

<tr>
<td>Date</td>
<td><code>{ &quot;$date&quot;: &quot;2015-01-01T00:00:00Z&quot; }</code></td>
<td>UTC and ISO-8601 format</td>
</tr>

<tr>
<td>Guid</td>
<td><code>{ &quot;$guid&quot;: &quot;ebe8f677-9f27-4303-8699-5081651beb11&quot; }</code></td>
<td></td>
</tr>

<tr>
<td>Binary</td>
<td><code>{ &quot;$binary&quot;: &quot;VHlwZSgaFc3sdcGFzUpcmUuLi4=&quot; }</code></td>
<td>Byte array in base64 string format</td>
</tr>

<tr>
<td>Int64</td>
<td><code>{ &quot;$numberLong&quot;: &quot;12200000&quot; }</code></td>
<td></td>
</tr>

<tr>
<td>Decimal</td>
<td><code>{ &quot;$numberDecimal&quot;: &quot;122.9991&quot; }</code></td>
<td></td>
</tr>

<tr>
<td>MinValue</td>
<td><code>{ &quot;$minValue&quot;: &quot;1&quot; }</code></td>
<td></td>
</tr>

<tr>
<td>MaxValue</td>
<td><code>{ &quot;$maxValue&quot;: &quot;1&quot; }</code></td>
<td></td>
</tr>
</tbody>
</table>

<p>LiteDB implements JSON in its <code>JsonSerializer</code> static class. Serialize and deserialize only accepts <code>BsonValue</code>s as input/output. If you want to convert your object type to a BsonValue, you need use a <code>BsonMapper</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-C#" data-lang="C#"><span class="kt">var</span> <span class="n">customer</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Customer</span> <span class="p">{</span> <span class="n">Id</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">&#34;John Doe&#34;</span> <span class="p">};</span>

<span class="kt">var</span> <span class="n">doc</span> <span class="p">=</span> <span class="n">BsonMapper</span><span class="p">.</span><span class="n">Global</span><span class="p">.</span><span class="n">ToDocument</span><span class="p">(</span><span class="n">customer</span><span class="p">);</span>

<span class="kt">var</span> <span class="n">jsonString</span> <span class="p">=</span> <span class="n">JsonSerialize</span><span class="p">.</span><span class="n">Serialize</span><span class="p">(</span><span class="n">doc</span><span class="p">,</span> <span class="n">pretty</span><span class="p">,</span> <span class="n">includeBinaryData</span><span class="p">);</span>
</code></pre></div>
<p><code>JsonSerialize</code> also supports <code>TextReader</code> and <code>TextWriter</code> to read/write directly from a file or <code>Stream</code>.</p>

<h3 id="objectid">ObjectId</h3>

<p><code>ObjectId</code> is a 12 bytes BSON type:</p>

<ul>
<li><code>Timestamp</code>: Value representing the seconds since the Unix epoch (4 bytes)</li>
<li><code>Machine</code>: Machine identifier (3 bytes)<br /></li>
<li><code>Pid</code>: Process id (2 bytes)</li>
<li><code>Increment</code>: A counter, starting with a random value (3 bytes)</li>
</ul>

<p>In LiteDB, documents are stored in a collection that requires a unique <code>_id</code> field that acts as a primary key. Because <code>ObjectIds</code> are small, most likely unique, and fast to generate, LiteDB uses <code>ObjectIds</code> as the default value for the <code>_id</code> field if the <code>_id</code> field is not specified.</p>

<p>Unlike the Guid data type, ObjectIds are sequential, so it&rsquo;s a better solution for indexing. ObjectIds use hexadecimal numbers represented as strings.</p>
<div class="highlight"><pre class="chroma"><code class="language-C#" data-lang="C#"><span class="kt">var</span> <span class="n">id</span> <span class="p">=</span> <span class="n">ObjectId</span><span class="p">.</span><span class="n">NewObjectId</span><span class="p">();</span>

<span class="c1">// You can get creation datetime from an ObjectId
</span><span class="c1"></span><span class="kt">var</span> <span class="n">date</span> <span class="p">=</span> <span class="n">id</span><span class="p">.</span><span class="n">CreationTime</span><span class="p">;</span>

<span class="c1">// ObjectId is represented in hex value
</span><span class="c1"></span><span class="n">Debug</span><span class="p">.</span><span class="n">WriteLine</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="s">&#34;507h096e210a18719ea877a2&#34;</span>

<span class="c1">// Create an instance based on hex representation
</span><span class="c1"></span><span class="kt">var</span> <span class="n">nid</span> <span class="p">=</span> <span class="k">new</span> <span class="n">ObjectId</span><span class="p">(</span><span class="s">&#34;507h096e210a18719ea877a2&#34;</span><span class="p">);</span>
</code></pre></div>
</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li class="zerostatic"><a href="https://www.zerostatic.io">www.zerostatic.io</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/www.example.com/js/scripts.min.bf1e1f7ae8e03db5f012356e825843facdff51c0a559cb0d27fe2bbe1db405c2.js"></script>
  

  
  
  
    
  


</body>

</html>

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Collections - LiteDB :: A .NET embedded NoSQL database</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="www.litedb.org/favicon.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.1.1/gh-fork-ribbon.min.css" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  
  
  
  <link rel="stylesheet" href="/www.litedb.org/css/style.min.80c4975c2143419d29740f44dab842d29887572b68eea2718cf5c164c94f1b9f.css">
  

  

</head>

<body class='page page-default-single'>

  <div class="github-fork-ribbon-wrapper right">
      <div class="github-fork-ribbon">
          <a href="https://github.com/mbdavid/litedb">Fork me on GitHub</a>
      </div>
  </div>

  <div id="main-menu-mobile" class="main-menu-mobile">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="www.litedb.org/">
        <span>HOME</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="www.litedb.org/docs/">
        <span>DOCS</span>
      </a>
    </li>
    
    <li class="menu-item-api">
      <a href="www.litedb.org/api/">
        <span>API</span>
      </a>
    </li>
    
    <li class="menu-item-download">
      <a href="https://www.nuget.org/packages/LiteDB/">
        <span>DOWNLOAD</span>
      </a>
    </li>
    
  </ul>
</div>
  <div class="wrapper">
    <div class='header'>
  <div class="container">
    <div class="logo">
      <a href="www.litedb.org"><img alt="Logo" src="/www.litedb.org/images/logo_litedb.svg" /></a>
    </div>
    <div class="logo-mobile">
      <a href="www.litedb.org"><img alt="Logo" src="/www.litedb.org/images/logo_litedb.svg" /></a>
    </div>
    <div id="main-menu" class="main-menu">
  <ul>
    
    
    <li class="menu-item-home">
      <a href="www.litedb.org/">
        <span>HOME</span>
      </a>
    </li>
    
    <li class="menu-item-docs">
      <a href="www.litedb.org/docs/">
        <span>DOCS</span>
      </a>
    </li>
    
    <li class="menu-item-api">
      <a href="www.litedb.org/api/">
        <span>API</span>
      </a>
    </li>
    
    <li class="menu-item-download">
      <a href="https://www.nuget.org/packages/LiteDB/">
        <span>DOWNLOAD</span>
      </a>
    </li>
    
  </ul>
</div>
    <button id="toggle-main-menu-mobile" class="hamburger hamburger--slider" type="button">
  <span class="hamburger-box">
    <span class="hamburger-inner"></span>
  </span>
</button>
  </div>
</div>


    
    
    
    
    
    
    
    
    
    

    
    <div class="container pt-2 pt-md-6 pb-3 pb-md-6">
      <div class="row">
        <div class="col-12 col-md-3 mb-3">
          <div class="sidebar">
            
<div class="docs-menu">
  <h4>Docs</h4>
  <ul>
    
    <li class="">
      <a href="www.litedb.org/docs/getting-started/">Getting Started</a>
    </li>
    
    <li class="">
      <a href="www.litedb.org/docs/data-structure/">Data Structure</a>
    </li>
    
    <li class="">
      <a href="www.litedb.org/docs/object-mapping/">Object Mapping</a>
    </li>
    
    <li class="active ">
      <a href="www.litedb.org/docs/collections/">Collections</a>
    </li>
    
    <li class="">
      <a href="www.litedb.org/docs/bsondocument/">BsonDocument</a>
    </li>
    
    <li class="">
      <a href="www.litedb.org/docs/expressions/">Expressions</a>
    </li>
    
    <li class="">
      <a href="www.litedb.org/docs/dbref/">DbRef</a>
    </li>
    
    <li class="">
      <a href="www.litedb.org/docs/connection-string/">Connection String</a>
    </li>
    
    <li class="">
      <a href="www.litedb.org/docs/filestorage/">FileStorage</a>
    </li>
    
    <li class="">
      <a href="www.litedb.org/docs/indexes/">Indexes</a>
    </li>
    
    <li class="">
      <a href="www.litedb.org/docs/encryption/">Encryption</a>
    </li>
    
    <li class="">
      <a href="www.litedb.org/docs/collation/">Collation</a>
    </li>
    
    <li class="">
      <a href="www.litedb.org/docs/pragmas/">Pragmas</a>
    </li>
    
  </ul>
</div>

          </div>
        </div>
        <div class="col-12 col-md-9">
          
<h1 class="title">Collections</h1>
<div class="content">
  

<p>Documents are stored and organized in collections. <code>LiteCollection</code> is a generic class that is used to manage collections in LiteDB. Each collection must have a unique name:</p>

<ul>
<li>Contains only letters, numbers and <code>_</code></li>
<li>Collection names are <strong>case insensitive</strong></li>
<li>Collection names starting with <code>_</code> are reserved for internal use</li>
</ul>

<p>The total size of all the collections names in a database is limited to 3000 bytes. If you plan to have many collections in your database, make sure to use short names for your collections. For example, if collection names are about 10 bytes in length, you can have ~300 collection in the database.</p>

<p>Collections are auto created on first <code>Insert</code> or <code>EnsureIndex</code> operation. Running a query, delete or update on a document in a non existing collection does not create one.</p>

<p><code>LiteCollection&lt;T&gt;</code> is a generic class that can be used with <code>&lt;T&gt;</code> as <code>BsonDocument</code> for schema-less documents.  Internally LiteDB converts <code>T</code> to <code>BsonDocument</code> and all operations use the this generic document.</p>

<p>In this example, both code snippets produce the same results.</p>
<div class="highlight"><pre class="chroma"><code class="language-C#" data-lang="C#"><span class="c1">// Typed collection
</span><span class="c1"></span><span class="n">using</span><span class="p">(</span><span class="kt">var</span> <span class="n">db</span> <span class="p">=</span> <span class="k">new</span> <span class="n">LiteDatabase</span><span class="p">(</span><span class="s">&#34;mydb.db&#34;</span><span class="p">))</span>
<span class="p">{</span>
    <span class="c1">// Get collection instance
</span><span class="c1"></span>    <span class="kt">var</span> <span class="n">col</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="n">GetCollection</span><span class="p">&lt;</span><span class="n">Customer</span><span class="p">&gt;(</span><span class="s">&#34;customer&#34;</span><span class="p">);</span>
    
    <span class="c1">// Insert document to collection - if collection does not exist, it is created
</span><span class="c1"></span>    <span class="n">col</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="k">new</span> <span class="n">Customer</span> <span class="p">{</span> <span class="n">Id</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span> <span class="n">Name</span> <span class="p">=</span> <span class="s">&#34;John Doe&#34;</span> <span class="p">});</span>
    
    <span class="c1">// Create an index over the Field name (if it doesn&#39;t exist)
</span><span class="c1"></span>    <span class="n">col</span><span class="p">.</span><span class="n">EnsureIndex</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
    
    <span class="c1">// Now, search for your document
</span><span class="c1"></span>    <span class="kt">var</span> <span class="n">customer</span> <span class="p">=</span> <span class="n">col</span><span class="p">.</span><span class="n">FindOne</span><span class="p">(</span><span class="n">x</span> <span class="p">=&gt;</span> <span class="n">x</span><span class="p">.</span><span class="n">Name</span> <span class="p">==</span> <span class="s">&#34;john doe&#34;</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// Untyped collection (T is BsonDocument)
</span><span class="c1"></span><span class="n">using</span><span class="p">(</span><span class="kt">var</span> <span class="n">db</span> <span class="p">=</span> <span class="k">new</span> <span class="n">LiteDatabase</span><span class="p">(</span><span class="s">&#34;mydb.db&#34;</span><span class="p">))</span>
<span class="p">{</span>
    <span class="c1">// Get collection instance
</span><span class="c1"></span>    <span class="kt">var</span> <span class="n">col</span> <span class="p">=</span> <span class="n">db</span><span class="p">.</span><span class="n">GetCollection</span><span class="p">(</span><span class="s">&#34;customer&#34;</span><span class="p">);</span>
    
    <span class="c1">// Insert document to collection - if collection does not exist, it is created
</span><span class="c1"></span>    <span class="n">col</span><span class="p">.</span><span class="n">Insert</span><span class="p">(</span><span class="k">new</span> <span class="n">BsonDocument</span><span class="p">{</span><span class="na"> [&#34;_id&#34;]</span> <span class="p">=</span> <span class="m">1</span><span class="p">,</span><span class="na"> [&#34;Name&#34;]</span> <span class="p">=</span> <span class="s">&#34;John Doe&#34;</span> <span class="p">});</span>
    
    <span class="c1">// Create an index over the Field name (if it doesn&#39;t exist)
</span><span class="c1"></span>    <span class="n">col</span><span class="p">.</span><span class="n">EnsureIndex</span><span class="p">(</span><span class="s">&#34;Name&#34;</span><span class="p">);</span>
    
    <span class="c1">// Now, search for your document
</span><span class="c1"></span>    <span class="kt">var</span> <span class="n">customer</span> <span class="p">=</span> <span class="n">col</span><span class="p">.</span><span class="n">FindOne</span><span class="p">(</span><span class="s">&#34;$.Name = &#39;john doe&#39;&#34;</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="system-collections">System Collections</h2>

<p>System collections are special collections that provide information about the datafile. All system collections start with <code>$</code>. All system collections, with the exception of <code>$file</code>, are read-only.</p>

<table>
<thead>
<tr>
<th>Collection</th>
<th>Description</th>
</tr>
</thead>

<tbody>
<tr>
<td>$cols()</td>
<td>Lists all collections in the datafile, including the system collections.</td>
</tr>

<tr>
<td>$database()</td>
<td>Shows general info about the datafile.</td>
</tr>

<tr>
<td>$indexes()</td>
<td>Lists all indexes in the datafile.</td>
</tr>

<tr>
<td>$sequences()</td>
<td>Lists all the sequences in the datafile.</td>
</tr>

<tr>
<td>$transactions()</td>
<td>Lists all the open transactions in the datafile.</td>
</tr>

<tr>
<td>$snapshots()</td>
<td>Lists all existing snapshots.</td>
</tr>

<tr>
<td>$open_cursors()</td>
<td>Lists all the open cursors in the datafile.</td>
</tr>

<tr>
<td>$dump(pageID)</td>
<td>Lists advanced info about the desired page. If no pageID is provided, lists all the pages.</td>
</tr>

<tr>
<td>$page_list(pageID)</td>
<td>Lists basic info about the desired page. If no pageID is provided, lists all the pages.</td>
</tr>

<tr>
<td>$query(subquery)</td>
<td>Takes a query as string and returns the result of the query. Can be used for simulating subqueries. <strong>Experimental</strong>.</td>
</tr>

<tr>
<td>$file(path)</td>
<td>See below.</td>
</tr>
</tbody>
</table>

<h4 id="file">$file</h4>

<p>The <code>$file</code> system collection can be used to read and write to external files.</p>

<ul>
<li><code>SELECT $ INTO $FILE('customers.json') FROM Customers</code> dumps the entire content from the collection <code>Customers</code> into a JSON file.</li>
<li><code>SELECT $ FROM $FILE('customers.json')</code> reads the entire content from the JSON file.</li>
</ul>

<p>There is also limited support for CSV files. Only basic data types are supported and, on writing, the schema of the first document returned by the query will define the schema of the entire CSV file, with additional fields being ignored.</p>

<ul>
<li><code>SELECT $ INTO $FILE('customers.csv') FROM Customers</code> dumps the entire content from the collection <code>Customers</code> into a CSV file.</li>
<li><code>SELECT $ FROM $FILE('customers.csv')</code> reads the entire content from the CSV file.</li>
</ul>

</div>
</div>

        </div>
      </div>
    </div>
    
  </div>

  <div class="sub-footer">
  <div class="container">
    <div class="row">
      <div class="col-12">
        <div class="sub-footer-inner">
          <ul>
            <li>
                Made with ♥ by LiteDB team - <a href="https://twitter.com/mbdavid" target="_blank">@mbdavid</a> - MIT License
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>

  

  
  

  
  <script type="text/javascript" src="/www.litedb.org/js/scripts.min.bf1e1f7ae8e03db5f012356e825843facdff51c0a559cb0d27fe2bbe1db405c2.js"></script>
  

  
  
  
    
      
      <script async src="https://www.googletagmanager.com/gtag/js?id=UA-54329029-1"></script>
      <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-54329029-1');
      </script>
    
  


</body>

</html>
